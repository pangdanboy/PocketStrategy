{"ast":null,"code":"import Banner from './../components/Banner';\nimport Content from './../components/Content';\nexport default {\n  name: 'UserCenter',\n  data: function () {\n    return {\n      infoEdit: false,\n      emailEdit: false,\n      name: '',\n      user_info: '',\n      user_web: '',\n      email: ''\n    };\n  },\n  components: {\n    Banner,\n    Content\n  },\n\n  mounted() {\n    // 刷新iscroll\n    this.$emit('refreshScroll'); // 获取当前登录用户信息\n\n    this.$axios.get('users/current').then(res => {\n      console.log(res.data);\n      this.name = res.data.name;\n      this.user_info = res.data.user_info ? res.data.user_info : '暂无简介，请用一句话介绍自己';\n      this.user_web = res.data.user_web ? res.data.user_web : '暂无网站，任何可以找到你的地方';\n      this.email = res.data.email;\n    }).catch(err => {\n      console.log(err);\n    });\n  },\n\n  methods: {\n    edit() {\n      this.infoEdit = true;\n    },\n\n    editEmail() {\n      this.emailEdit = true; // 调用父组件方法显示邮箱修改框\n\n      this.$emit('showEditEmail');\n    },\n\n    save() {\n      this.infoEdit = false;\n      this.$axios.put('users/edit', {\n        name: this.name,\n        user_info: this.user_info,\n        user_web: this.user_web\n      }).then(res => {\n        console.log(res.data);\n        this.$message({\n          message: '保存成功',\n          type: 'success'\n        });\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA0CA;AACA;AACA;EACAA,kBADA;EAEAC;IACA;MACAC,eADA;MAEAC,gBAFA;MAGAH,QAHA;MAIAI,aAJA;MAKAC,YALA;MAMAC;IANA;EAQA,CAXA;EAYAC;IACAC,MADA;IAEAC;EAFA,CAZA;;EAgBAC;IACA;IACA,4BAFA,CAGA;;IACA;MACAC;MACA;MACA;MACA;MACA;IACA,CANA,EAMAC,KANA,CAMAC;MACAF;IACA,CARA;EASA,CA7BA;;EA8BAG;IACAC;MACA;IACA,CAHA;;IAIAC;MACA,sBADA,CAEA;;MACA;IACA,CARA;;IASAC;MACA;MACA;QACAjB,eADA;QAEAI,yBAFA;QAGAC;MAHA,GAIAa,IAJA,CAIAC;QACAR;QACA;UACAS,eADA;UAEAC;QAFA;MAIA,CAVA,EAUAT,KAVA,CAUAC;QACAF;MACA,CAZA;IAaA;;EAxBA;AA9BA","names":["name","data","infoEdit","emailEdit","user_info","user_web","email","components","Banner","Content","mounted","console","catch","err","methods","edit","editEmail","save","then","res","message","type"],"sourceRoot":"src/views","sources":["UserCenter.vue"],"sourcesContent":["<template>\r\n  <div id=\"user_center\">\r\n    <Banner>\r\n      <template #title>\r\n        <p class=\"title\">个人中心</p>\r\n      </template>\r\n    </Banner>\r\n    <Content>\r\n      <template #content-in>\r\n        <div class=\"content-in\">\r\n          <div class=\"left\" >\r\n            <img src=\"./../assets/images/userAvatar.jpg\" alt=\"\">\r\n            <p>既然你诚心诚意的发问了，那我就大发慈悲的告诉你，为了保护宇宙的和平，贯彻爱与真实的邪恶...</p>\r\n          </div>\r\n          <div class=\"right\">\r\n            <form action=\"\">\r\n              <div class=\"name\">\r\n                昵称：<input type=\"text\" :disabled=\"!infoEdit\" v-model=\"name\">\r\n              </div>\r\n              <div class=\"user_info\">\r\n                个人简介：<input type=\"text\" :disabled=\"!infoEdit\" v-model=\"user_info\">\r\n              </div>\r\n              <div class=\"user_web\">\r\n                个人网站：<input type=\"text\" :disabled=\"!infoEdit\" v-model=\"user_web\">\r\n              </div>\r\n              <div class=\"email\">\r\n                绑定邮箱：<input type=\"text\" :disabled=\"!emailEdit\" v-model=\"email\">\r\n                <span @click=\"editEmail\">修改</span>\r\n              </div>\r\n              <div class=\"operation\">\r\n                <input type=\"button\" value=\"编辑\" @click=\"edit\">\r\n                <input type=\"submit\" value=\"保存\" @click.prevent=\"save\" :disabled=\"!infoEdit\">\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </Content>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Banner from './../components/Banner'\r\nimport Content from './../components/Content'\r\nexport default {\r\n  name: 'UserCenter',\r\n  data: function () {\r\n    return {\r\n      infoEdit: false,\r\n      emailEdit: false,\r\n      name: '',\r\n      user_info: '',\r\n      user_web: '',\r\n      email: ''\r\n    }\r\n  },\r\n  components: {\r\n    Banner,\r\n    Content\r\n  },\r\n  mounted () {\r\n    // 刷新iscroll\r\n    this.$emit('refreshScroll')\r\n    // 获取当前登录用户信息\r\n    this.$axios.get('users/current').then(res => {\r\n      console.log(res.data)\r\n      this.name = res.data.name\r\n      this.user_info = res.data.user_info ? res.data.user_info : '暂无简介，请用一句话介绍自己'\r\n      this.user_web = res.data.user_web ? res.data.user_web : '暂无网站，任何可以找到你的地方'\r\n      this.email = res.data.email\r\n    }).catch(err => {\r\n      console.log(err)\r\n    })\r\n  },\r\n  methods: {\r\n    edit () {\r\n      this.infoEdit = true\r\n    },\r\n    editEmail () {\r\n      this.emailEdit = true\r\n      // 调用父组件方法显示邮箱修改框\r\n      this.$emit('showEditEmail')\r\n    },\r\n    save () {\r\n      this.infoEdit = false\r\n      this.$axios.put('users/edit', {\r\n        name: this.name,\r\n        user_info: this.user_info,\r\n        user_web: this.user_web\r\n      }).then(res => {\r\n        console.log(res.data)\r\n        this.$message({\r\n          message: '保存成功',\r\n          type: 'success'\r\n        })\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  #banner{\r\n  width: 100%;\r\n  height: 80vh;\r\n  background: url('./../assets/images/user.png') no-repeat;\r\n  background-size: cover;\r\n  position: relative;\r\n  .title{\r\n    width: 0px;\r\n    font-size: 32px;\r\n    color: rgba(255,255,255,1);\r\n    position: absolute;\r\n    text-align: center;\r\n    left: 50%;\r\n    top: 50%;\r\n    transform: translate(-50%, -50%);\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    animation: showText 4s steps(8) 0s forwards;\r\n  }\r\n  @keyframes showText {\r\n    from{\r\n      width: 0;\r\n    }\r\n    to{\r\n      width: 257px;\r\n    }\r\n  }\r\n}\r\n  #content{\r\n    .content-in{\r\n      width: 1200px;\r\n      height: 500px;\r\n      background: linear-gradient(to right bottom,rgba(255,255,255,0.8),rgba(255,255,255,0.3));\r\n      margin: 0 auto;\r\n      border-radius: 20px;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      .left{\r\n        width: 15%;\r\n        height: 420px;\r\n        background-color: rgb(237, 228, 64);\r\n        margin-right: 50px;\r\n        border-radius: 20px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n        justify-content: flex-start;\r\n        padding-top: 60px;\r\n        box-sizing: border-box;\r\n        img{\r\n          width: 100px;\r\n          height: 100px;\r\n          border-radius: 50%;\r\n          margin-bottom: 20px;\r\n        }\r\n        p{\r\n          width: 100px;\r\n        }\r\n      }\r\n      .right{\r\n        width: 50%;\r\n        height: 420px;\r\n        background-color: rgb(237, 228, 64);\r\n        border-radius: 20px;\r\n        form{\r\n          width: 100%;\r\n          height: 100%;\r\n          display: flex;\r\n          flex-direction: column;\r\n          align-items: center;\r\n          justify-content: flex-start;\r\n          padding-top: 50px;\r\n          box-sizing: border-box;\r\n          div{\r\n            width: 450px;\r\n            margin-bottom: 50px;\r\n            display: flex;\r\n            align-items: center;\r\n            justify-content: flex-end;\r\n            input{\r\n              width: 300px;\r\n              border: none;\r\n              outline: none;\r\n              background-color: transparent;\r\n              border-bottom: 2px solid #ffffff;\r\n              margin-right: 30px;\r\n              padding: 5px;\r\n              box-sizing: border-box;\r\n            }\r\n          }\r\n          .email{\r\n            width: 510px;\r\n            margin-bottom: 20px;\r\n            input{\r\n              margin-right: 0;\r\n            }\r\n            span{\r\n              display: inline-block;\r\n              width: 60px;\r\n              height: 35px;\r\n              background-color: #ffffff;\r\n              border-radius: 10px;\r\n              cursor: pointer;\r\n              line-height: 35px;\r\n              text-align: center;\r\n            }\r\n          }\r\n          .operation{\r\n            input{\r\n              border: none;\r\n              width: 100px;\r\n              height: 35px;\r\n              background-color: #fff;\r\n              border-radius: 10px;\r\n              margin-right: 70px;\r\n              cursor: pointer;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}